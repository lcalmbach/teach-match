<!-- substitution_edit.html -->
{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block content %}
<div class="col-md-6 offset-md-3">
  <div class="form-container">
    <h2>
      <button class="btn btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseForm" aria-expanded="false" aria-controls="collapseForm">
        Stellvertretung mutieren
      </button>
    </h2>
    <div class="collapse" id="collapseForm">
      <div class="card card-body">
        <form method="post">
          {% csrf_token %}
          {{ form|crispy }}
          <button type="submit" class="btn btn-primary">Speichern</button>
        </form>
      </div>
    </div>
  </div>

    <div class="container mt-5">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="zusammenfassung-tab" data-bs-toggle="tab" data-bs-target="#zusammenfassung" type="button" role="tab" aria-controls="zusammenfassung" aria-selected="true">Zusammenfassung</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="kandidaten-tab" data-bs-toggle="tab" data-bs-target="#kandidaten" type="button" role="tab" aria-controls="kandidaten" aria-selected="false">Mögliche Stellvertretende</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="lektionen-tab" data-bs-toggle="tab" data-bs-target="#lektionen" type="button" role="tab" aria-controls="lektionen" aria-selected="false">Lektionen verteilen</button>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="zusammenfassung" role="tabpanel" aria-labelledby="zusammenfassung-tab">
              <div class="mt-3">
                <!-- Content for Lektionen verteilen -->
                <p>{{ substitution.summary|safe }}</p>
            </div>
            </div>
            <div class="tab-pane fade" id="kandidaten" role="tabpanel" aria-labelledby="kandidaten-tab">
                <div class="mt-3">
                    <!-- Content for Kandidaten -->
                    <p>Hier gibt es eine Liste von Kandidatinnen. Sie kann durch entfernen und anfügen von Kandidatinnen editiert werden. Für alle Kandidatinnen können die Fächer gewählt werden, die sie vertreten werden. zudem kann bei einer Kandidatin ein Flag "volle Stellvertretung gesetzt werden, damit wird sie automatisch überall gesetzt."</p>
                </div>
            </div>
            <div class="tab-pane fade" id="lektionen" role="tabpanel" aria-labelledby="lektionen-tab">
              <div class="tab-pane fade show active" id="zusammenfassung" role="tabpanel" aria-labelledby="zusammenfassung-tab">
                <div class="mt-3">
                    <form method="post">
                        {% csrf_token %}
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Tag</th>
                                    <th>Periode</th>
                                    <th>Lektion</th>
                                    <th>Klasse</th>
                                    <th>Stellvertretung</th>
                                    <th>Bestätigt</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for form in formset %}
                                <tr>
                                    <td>{{ form.instance.lesson.date }}</td>
                                    <td>{{ form.instance.lesson.period }}</td>
                                    <td>{{ form.instance.lesson.subject.name }}</td>
                                    <td>{{ form.instance.lesson.school_class.name }}</td>
                                    <td>{{ form.deputy }}</td>
                                    <td>{{ form.confirmed }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        <button type="submit" class="btn btn-primary">Speichern</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
</body>
</html>


{% endblock %}
