{% extends "base.html" %}
{% block content %}
<div class="info-container">
  <b><p>{{ school.name }}</p></b>
  <p>{{ school.level }}</p>
  <p>{{ school.address }}</p>
  <p>{{ school.location }}</p>
  <a href="{% url 'school_list' %}" class="btn btn-primary">Zur√ºck</a>
</div>
<br /><br />

<div class="container mt-5">
  <!-- Tab links -->
  <ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
      <a
        class="nav-link active"
        id="substitutions-tab"
        data-bs-toggle="tab"
        href="#substitutions"
        role="tab"
        aria-controls="substitutions"
        aria-selected="true"
        >Stellvertretungen</a
      >
    </li>
    <li class="nav-item" role="presentation">
      <a
        class="nav-link"
        id="contacts-tab"
        data-bs-toggle="tab"
        href="#contacts"
        role="tab"
        aria-controls="contacts"
        aria-selected="false"
        >Kontakte</a
      >
    </li>
    <li class="nav-item" role="presentation">
      <a
        class="nav-link"
        id="teachers-tab"
        data-bs-toggle="tab"
        href="#teachers"
        role="tab"
        aria-controls="teachers"
        aria-selected="false"
        >LehrerInnen</a
      >
    </li>
    <li class="nav-item" role="presentation">
      <a
        class="nav-link"
        id="classes-tab"
        data-bs-toggle="tab"
        href="#classes"
        role="tab"
        aria-controls="classes"
        aria-selected="false"
        >Klassen</a
      >
    </li>
  </ul>

  <!-- Tab content -->
  <div class="tab-content" id="myTabContent">
    <div
      class="tab-pane fade show active"
      id="substitutions"
      role="tabpanel"
      aria-labelledby="substitutions-tab"
    >
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Lehrerin</th>
            <th>von</th>
            <th>bis</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% for s in substitutions %}
          <tr>
            <td><a href="{% url 'teacher_detail' pk=s.teacher.id %}">{{ s.teacher.fullname }}</a></td>
            <td>{{ s.start_date }}</td>
            <td>{{ s.end_date }}</td>
            <td>{{ s.status.name }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div
      class="tab-pane fade"
      id="contacts"
      role="tabpanel"
      aria-labelledby="contacts-tab"
    >
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Rolle</th>
            <th>Name</th>
            <th>Telefon</th>
            <th>eMail</th>
          </tr>
        </thead>
        <tbody>
          {% for contact in school_contacts %}
          <tr>
            <td>{{ contact.role.name }}</td>
            <td><a href="{% url 'teacher_detail' pk=contact.id %}">{{ contact.person.fullname }}</a></td>
            <td>{{ contact.person.phone_number }}</td>
            <td>{{ contact.person.email }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    
    <div
      class="tab-pane fade"
      id="teachers"
      role="tabpanel"
      aria-labelledby="teachers-tab"
    >
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Name</th>
            <th>Telefon</th>
            <th>eMail</th>
          </tr>
        </thead>
        <tbody>
          {% for contact in school_teachers %}
          <tr>
            <td><a href="{% url 'teacher_detail' pk=contact.person.pk %}">{{ contact.person.fullname }}</a></td>
            <td>{{ contact.person.phone_number }}</td>
            <td>{{ contact.person.email }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    
    <div
      class="tab-pane fade"
      id="classes"
      role="tabpanel"
      aria-labelledby="classes-tab"
    >
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Name</th>
            <th>Klassenlehrer*In</th>
          </tr>
        </thead>
        <tbody>
          {% for school_class in school_classes %}
          <tr>
            <td>{{ school_class.name }}</td>
            <td><a href="{% url 'teacher_detail' pk=school_class.contact_person.id %}">{{ school_class.contact_person.fullname }}</a></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

{% endblock content %}
